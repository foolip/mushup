<!DOCTYPE HTML>
<html>
<head>
{% if url %}
<meta http-equiv="Refresh" content="5; URL=/">
{% endif %}
<title>Mushup! OpenID Authentication</title>
<link rel="stylesheet" href="http://static.mushup.foolip.org/style.css" />
<style type="text/css">
    body > div {
        margin: 100px auto;
        max-width: 700px;
        padding: .5em;
    }

    body > div > p {
        margin-bottom: 0;
    }

    .success, .cancel, .error {
        border: 1px solid black;
        font-weight: bold;
    }

    .success {
        background: #9f9;
    }

    .cancel {
        background: #ccc;
    }

    .error {
        background: #f99;
    }

    .login {
        text-align: center;
    }

    .login p {
        font-size: smaller;
    }

    .login input[type=text] {
        height: 18px;
        padding-left: 20px;
	border: 1px solid #ccc;
        background: white url("http://openid.net/wp-content/uploads/2007/10/openid_small_logo.png") no-repeat 1px 1px;
    }
</style>
<script type="text/javascript" src="http://yui.yahooapis.com/2.5.1/build/yahoo/yahoo-min.js"></script> 
<script type="text/javascript" src="http://yui.yahooapis.com/2.5.1/build/dom/dom-min.js"></script>  
<script type="text/javascript" src="http://yui.yahooapis.com/2.5.1/build/event/event-min.js" ></script>
<script type="text/javascript" src="http://static.mushup.foolip.org/input.js" ></script>
</head>
<body>
  {% if error %}
    <div class="error">{{ error|escape }}</div>
  {% endif %}

  {% if url %}
    <div class="success">
      OpenID authentication succeeded; you authenticated as
        <a href="{{ url }}">{{ url|escape }}</a>.

      <p>
	You can now return to <a href="/">Mushup!</a>, or wait to be automatically redirected.
      </p>
    </div>
  {% endif %}

  {% if cancel %}
    <div class="cancel">
      {{ cancel|escape }}
      <p>Try another OpenID or return anonymously to <a href="/">Mushup!</a></p>
    </div>
  {% endif %}

  {% if failure_reason %}
    <div class="error">
      {{ failure_reason|escape }}
    </div>
  {% endif %}

  {% if not url %}
    <div class="login">
      <form method="post" action="{{ consumer_url }}">
	<input type="text" size="40" name="openid_identifier"
	       class="cleardefault" value="Enter your OpenID here..."/>
	<input type="submit" value="Begin" />
      </form>
      <p><a href="http://openid.net/get/">How do I get an OpenID?</a></p>
    </div>
  {% endif %}
</body>
</html>
